Search.setIndex({"docnames": ["CHANGELOGS", "api/benchmarks", "api/index", "api/monitoring", "api/plotting", "api/tests", "auto_examples/index", "auto_examples/plot_llama_bench", "auto_examples/plot_torch_export", "auto_examples/sg_execution_times", "index", "license", "sg_execution_times", "tutorial/index"], "filenames": ["CHANGELOGS.rst", "api/benchmarks.rst", "api/index.rst", "api/monitoring.rst", "api/plotting.rst", "api/tests.rst", "auto_examples/index.rst", "auto_examples/plot_llama_bench.rst", "auto_examples/plot_torch_export.rst", "auto_examples/sg_execution_times.rst", "index.rst", "license.rst", "sg_execution_times.rst", "tutorial/index.rst"], "titles": ["Change Logs", "benchmarks", "API", "monitoring", "plotting", "tests", "Example gallery", "Measure LLAMA speed", "Evaluate different ways to export a torch model to ONNX", "Computation times", "onnxrt-backend-dev: tools to help developping onnx functionalities in torch", "License", "Computation times", "Tutorial"], "terms": {"class": [1, 3, 5, 8], "sourc": [1, 3, 4, 5, 6, 7, 8, 10], "dict": [1, 3, 4, 5, 7, 8], "str": [1, 3, 4, 5, 8], "int": [1, 3, 4, 5], "float": [1, 3, 4, 5], "tupl": [1, 3, 4, 8], "return": [1, 3, 4, 5, 8], "machin": [1, 7], "specif": 1, "script_nam": [1, 7], "config": [1, 7], "list": [1, 4, 5, 8], "verbos": [1, 3, 7, 8], "0": [1, 3, 5, 7, 8, 9, 12], "run": [1, 5, 7], "multipl": 1, "time": [1, 7], "extract": 1, "inform": [1, 3], "from": [1, 3, 4, 5, 7, 8, 9, 11, 12], "output": [1, 5, 7], "follow": [1, 11, 13], "pattern": 1, "metric": 1, "valu": [1, 5, 7, 8], "paramet": [1, 3, 4, 5, 8], "python": [1, 3, 6, 7, 8], "execut": [1, 3, 7, 9, 12], "do": [1, 3, 8, 11], "us": [1, 3, 4, 11], "tqdm": [1, 8], "progress": 1, "The": [1, 3, 11, 13], "few": 1, "iter": [1, 3, 7], "dummi": 1, "model": [1, 6, 9, 12], "see": [1, 3, 4, 13], "measur": [1, 5, 6, 8, 9, 12], "speed": [1, 6, 9, 12], "can": [1, 3, 8], "call": [1, 3, 5, 8], "function": [1, 3, 4, 5, 8], "collect": 1, "mani": 1, "figur": [1, 4], "m": [1, 7], "help": [1, 8], "option": 1, "h": 1, "show": [1, 3, 4], "thi": [1, 3, 5, 8, 11, 13], "messag": [1, 5], "exit": [1, 8], "r": [1, 8, 13], "repeat": [1, 3, 5, 7, 8], "number": [1, 3, 5, 8], "default": [1, 3, 5], "i": [1, 3, 5, 8, 11], "5": [1, 3, 5, 7, 8], "w": [1, 8], "warmup": [1, 3, 5, 8], "includ": [1, 11], "set": [1, 3, 8], "backend": [1, 7, 8, 13], "ort": [1, 7], "inductor": [1, 7], "devic": [1, 3, 7], "cpu": [1, 7, 8], "cuda": [1, 3, 7, 8, 13], "num_hidden_lay": [1, 7], "hidden": 1, "layer": 1, "1": [1, 3, 5, 7, 8], "monitor": [2, 4, 8], "test": [2, 8], "plot": [2, 7, 8], "benchmark": [2, 3], "onnxrt_backend_dev": [3, 5, 7, 8], "stmt": 3, "callabl": [3, 5], "context": 3, "ani": [3, 4, 5, 8, 11], "none": [3, 4, 5, 8], "10": [3, 4, 5, 7, 8], "50": [3, 7, 8], "div_by_numb": 3, "bool": 3, "true": [3, 7, 8], "max_tim": [3, 8], "statement": 3, "result": [3, 5, 8], "dictionari": 3, "string": [3, 8], "variabl": [3, 8], "know": 3, "averag": [3, 8], "over": 3, "experi": [3, 8], "one": [3, 8], "row": 3, "befor": [3, 8], "start": 3, "real": 3, "divid": 3, "until": 3, "total": [3, 7, 8, 9, 12], "goe": 3, "beyond": 3, "approxim": 3, "ignor": [3, 8], "must": 3, "pprint": [3, 8], "import": [3, 7, 8], "math": 3, "co": 3, "re": 3, "lambda": [3, 8], "9": [3, 8], "11999986783485e": 3, "08": [3, 8], "context_s": [3, 8], "64": [3, 8], "deviat": [3, 8], "2": [3, 5, 7, 8, 9, 12], "56125002230228e": 3, "09": 3, "max_exec": [3, 8], "800000043469481e": 3, "min_exec": [3, 8], "8": [3, 7, 8], "799999704933726e": 3, "ttime": [3, 8], "07": 3, "warmup_tim": [3, 7, 8], "40000018090359e": 3, "06": [3, 8], "timer": 3, "better": 3, "understand": 3, "durat": [3, 8], "correspond": 3, "main": [3, 7], "memory_peak": [3, 4, 8], "pid": 3, "delai": 3, "01": [3, 8], "fals": [3, 7, 8], "spy": 3, "anoth": 3, "process": [3, 8], "sent": 3, "an": [3, 11], "argument": [3, 5, 8], "id": 3, "current": 3, "between": [3, 5], "two": [3, 5], "get": [3, 7, 8], "exampl": [3, 5, 7, 8, 9, 10, 12], "code": [3, 4, 6, 7, 8], "block": 3, "p": [3, 8], "stat": [3, 8], "stop": [3, 8], "print": [3, 7, 8], "about": 3, "It": 3, "method": [3, 5, 8], "end": [3, 5, 7, 8], "everi": 3, "second": [3, 7, 8], "enabl": [3, 8], "tell": 3, "filenam": [3, 7, 8], "line": 3, "func_nam": 3, "nc1": 3, "nc2": 3, "tin": 3, "tall": 3, "graph": [3, 4, 8], "structur": 3, "repres": 3, "name": [3, 5, 8], "spent": 3, "tout": 3, "sub": [3, 8], "add_called_bi": 3, "pnode": 3, "add_calls_to": 3, "time_el": 3, "node": [3, 8], "as_dict": 3, "filter_nod": 3, "sort_kei": 3, "sortkei": [3, 8], "render": 3, "interpret": [3, 8], "fn": [3, 8], "load": 3, "datafram": [3, 4, 7, 8], "displai": [3, 5], "onli": [3, 5], "which": 3, "remov": [3, 8], "built": [3, 8], "small": [3, 8], "impact": 3, "sort": 3, "static": 3, "filter_node_": 3, "info": [3, 8], "filter": 3, "out": [3, 11], "overwrit": 3, "attribut": 3, "held": 3, "boolean": 3, "keep": [3, 5], "forget": 3, "get_root": 3, "root": [3, 8], "properti": 3, "kei": [3, 4], "file": [3, 9, 11, 12], "to_json": 3, "as_str": 3, "kwarg": [3, 5], "json": 3, "convert": [3, 8], "dump": 3, "to_text": [3, 8], "fct_width": 3, "60": [3, 8], "text": [3, 5, 8], "fct": [3, 5], "cumul": [3, 8], "rootrem": 3, "as_df": 3, "return_result": 3, "sort_stat": [3, 8], "well": 3, "first": [0, 3], "posit": 3, "addit": [3, 5], "creat": 3, "cprofil": [3, 8], "raw": [3, 8], "statist": 3, "png": [3, 4, 7, 8], "hire": [3, 4], "pdf": [3, 4], "clean_text": [3, 8], "instanc": 3, "pstat": [3, 8], "clean": 3, "pyinstrument": 3, "ha": 3, "nice": 3, "stack": 3, "same": [3, 5, 8], "tri": [3, 5], "replic": 3, "base": [3, 8, 13], "produc": 3, "modul": [3, 8], "here": 3, "def": [3, 8], "fct0": 3, "t": [3, 7], "sleep": [3, 5], "fct1": 3, "fct2": 3, "fct3": 3, "fct4": 3, "x": [3, 8], "split": [3, 8], "3": [3, 7, 8], "00004": 3, "61213": 3, "11": [3, 7, 8], "61209": 3, "00001": 3, "81307": 3, "25": [3, 8], "11089": 3, "15": [3, 8], "00003": 3, "70216": 3, "20": [3, 8], "20089": 3, "7": [3, 5, 7, 8], "20087": 3, "00002": 3, "50125": 3, "4": [3, 7, 8], "81297": 3, "df1": [4, 8], "panda": [4, 7, 8], "export": [4, 6, 9, 12, 13], "suptitl": [4, 8], "peak": [4, 8], "bar": [4, 8], "figsiz": [4, 7, 8], "6": [4, 7, 8], "fontsiz": 4, "matplotlib": [4, 7, 8], "pyplot": [7, 8], "ax": [4, 7, 8], "draw": 4, "data": [4, 7, 8], "come": 4, "profil": 4, "start_spying_on": [4, 8], "index": [4, 7, 8, 13], "subtitl": 4, "titl": [4, 7, 8], "whole": 4, "horizont": 4, "threshold": 4, "limit": [4, 8, 11], "size": [4, 8], "font": 4, "ext_test_cas": [5, 7, 8], "methodnam": 5, "runtest": 5, "assertalmostequ": 5, "expect": 5, "ndarrai": 5, "atol": 5, "rtol": 5, "fail": 5, "object": [5, 8], "ar": [5, 8, 10], "unequ": 5, "determin": 5, "differ": [5, 6, 9, 12], "round": 5, "given": 5, "decim": 5, "place": 5, "compar": [5, 8], "zero": 5, "more": [5, 7], "than": 5, "delta": 5, "note": 5, "usual": 5, "signific": 5, "digit": 5, "most": 5, "If": 5, "equal": 5, "thei": [5, 8], "automat": 5, "almost": 5, "captur": 5, "standard": 5, "error": [5, 7, 8], "classmethod": 5, "teardownclass": 5, "hook": 5, "deconstruct": 5, "fixtur": 5, "after": [5, 8], "all": [5, 6, 11, 12], "trycal": 5, "msg": 5, "none_if": 5, "catch": 5, "substr": 5, "found": 5, "arg": [5, 8], "scenario": [5, 8], "descript": [5, 8], "epilog": 5, "expos": [5, 8], "namespac": 5, "pars": 5, "packag": [5, 8], "script": [5, 7, 8], "avail": [5, 8], "parser": 5, "empti": 5, "publish": [5, 11], "contain": 5, "otherwis": [5, 11], "separ": 5, "comma": 5, "sy": [5, 8], "n_tree": 5, "tree": 5, "train": [5, 13], "llama": [6, 9, 12], "evalu": [6, 9, 12], "wai": [6, 9, 12], "torch": [6, 7, 9, 12, 13], "onnx": [6, 9, 12], "download": [6, 7, 8, 13], "auto_examples_python": 6, "zip": 6, "jupyt": [6, 7, 8], "notebook": [6, 7, 8], "auto_examples_jupyt": 6, "gener": [6, 7, 8], "sphinx": [6, 7, 8], "go": [7, 8], "full": [7, 8], "plt": [7, 8], "itertool": [7, 8], "unit_test_go": 7, "bench_run": 7, "run_benchmark": 7, "get_machin": 7, "benchmarkerror": 7, "dort_bench": 7, "els": [7, 8], "capabl": 7, "product": [7, 8], "is_avail": [7, 8], "append": [7, 8], "try": [7, 8], "data_collect": 7, "except": [7, 8], "e": [7, 8], "df": [7, 8], "drop": 7, "axi": 7, "plot_llama_bench": [7, 9, 12], "csv": [7, 8], "to_csv": [7, 8], "read_csv": 7, "cast": 7, "type": 7, "00": [7, 8, 9, 12], "": [7, 8], "16": [7, 8], "100": [7, 8], "36": 7, "18": [7, 8], "14": [7, 8], "processor": [7, 8], "version": [0, 7, 13], "has_cuda": [7, 8], "device_nam": 7, "cmd": 7, "120378": 7, "381680": 7, "x86_64": [7, 8], "12": [7, 8], "jun": 7, "2023": 7, "05": [7, 8], "26": [7, 8], "28": [7, 8], "gcc": 7, "usr": [7, 8], "bin": 7, "nvidia": [7, 8], "geforc": [7, 8], "gtx": [7, 8], "1060": [7, 8], "d": 7, "144195": 7, "460361": 7, "simpl": [7, 8], "keyerror": 7, "rais": [7, 8], "runtimeerror": [7, 8], "f": [7, 8], "miss": 7, "column": [7, 8], "n": [7, 8], "head": 7, "fig": [7, 8], "subplot": [7, 8], "piv": [7, 8], "pivot": 7, "len": [7, 8], "dort": 7, "nwarmup": 7, "ntrain": 7, "tight_layout": [7, 8], "savefig": [7, 8], "minut": [7, 8], "39": [7, 8, 9, 12], "855": [7, 8, 9, 12], "ipynb": [7, 8], "py": [7, 8, 9, 12], "galleri": [7, 8, 10, 12], "perform": 8, "onnxruntim": [8, 13], "wa": 8, "through": 8, "torchscript": 8, "let": 8, "torchdynamo": 8, "dynamo": 8, "previou": 8, "optim": 8, "dynopt": 8, "custom": 8, "cus_p0": 8, "support": 8, "veri": 8, "reli": 8, "fx": 8, "design": 8, "closer": 8, "what": 8, "tensorflow": 8, "doe": 8, "unus": 8, "were": 8, "constant": 8, "fold": 8, "cus_p2": 8, "To": 8, "doc": 8, "plot_torch_export": [8, 9, 12], "take": 8, "around": 8, "larger": 8, "contextlib": 8, "o": [8, 13], "platform": 8, "multiprocess": 8, "io": 8, "warn": 8, "log": [8, 10], "catch_warn": 8, "simplefilt": 8, "cudaexecutionprovid": 8, "get_available_provid": 8, "importerror": 8, "numpi": 8, "np": 8, "profile2graph": 8, "nn": 8, "torch_exp": 8, "onnx_export": 8, "to_onnx": 8, "memory_peak_plot": 8, "get_figur": 8, "get_parsed_arg": 8, "measure_tim": 8, "disabl": 8, "system_info": 8, "ob": 8, "core": 8, "cpu_count": 8, "cuda_count": 8, "device_count": 8, "cuda_nam": 8, "get_device_nam": 8, "cuda_capa": 8, "get_device_cap": 8, "assertionerror": 8, "pass": 8, "2024": 8, "472": 8, "real_acceler": 8, "158": 8, "get_acceler": 8, "ds_acceler": 8, "auto": 8, "detect": 8, "script_arg": 8, "__doc__": 8, "middl": 8, "55mb": 8, "larg": 8, "1gb": 8, "maxtim": 8, "maximum": 8, "comput": 8, "when": 8, "A": [8, 11], "mymodelclass": 8, "__init__": 8, "self": 8, "super": 8, "conv1": 8, "conv2d": 8, "128": 8, "conv2": 8, "fc1": 8, "linear": 8, "13456": 8, "1024": 8, "fc": 8, "fc2": 8, "fc3": 8, "elif": 8, "512": 8, "4096": 8, "loop": 8, "fca": 8, "fcb": 8, "fcc": 8, "fcd": 8, "fce": 8, "fcf": 8, "fcg": 8, "fch": 8, "fci": 8, "fck": 8, "fcl": 8, "fcm": 8, "fcn": 8, "unfold": 8, "valueerror": 8, "unsupport": 8, "forward": 8, "max_pool2d": 8, "relu": 8, "flatten": 8, "create_model_and_input": 8, "shape": 8, "input_tensor": 8, "rand": 8, "float32": 8, "assert": 8, "torch_model_s": 8, "size_model": 8, "param": 8, "numel": 8, "finfo": 8, "dtype": 8, "bit": 8, "model_s": 8, "mb": [8, 9, 12], "31467437744140625": 8, "export_script": 8, "redirect_stdout": 8, "stringio": 8, "input_nam": 8, "input": 8, "export_dynamo": 8, "export_output": 8, "dynamo_export": 8, "save": 8, "export_dynopt": 8, "model_onnx": 8, "model_proto": 8, "onnxrewrit": 8, "optimized_model": 8, "open": 8, "wb": 8, "write": 8, "serializetostr": 8, "export_cus_p0": 8, "onx": 8, "noqa": 8, "f821": 8, "export_cus_p2": 8, "remove_unus": 8, "constant_fold": 8, "check": 8, "work": 8, "export_funct": 8, "__name__": 8, "replac": 8, "export_": 8, "supported_export": 8, "k": 8, "v": 8, "item": 8, "plot_torch_export_": 8, "skip": 8, "due": 8, "1000": 8, "continu": 8, "done": 8, "st_size": 8, "0f": 8, "defin": 8, "to_dict": 8, "unit": 8, "gpu": 8, "g": 8, "enumer": 8, "_": 8, "set_devic": 8, "updat": [8, 13], "exported_mod": 8, "plot_torch_export_memori": 8, "to_excel": 8, "xlsx": 8, "rang": 8, "consumpt": 8, "mean": 8, "begin": 8, "gpu0_peak": 8, "gpu0_mean": 8, "gpu0_n": 8, "gpu0_begin": 8, "gpu0_end": 8, "784": 8, "238281": 8, "236979": 8, "000006": 8, "230469": 8, "98": 8, "785": 8, "070312": 8, "643852": 8, "000022": 8, "13": 8, "786": 8, "691406": 8, "239323": 8, "000029": 8, "787": 8, "386719": 8, "163762": 8, "000025": 8, "785156": 8, "nan": 8, "perf_count": 8, "min": 8, "max": 8, "last": 8, "std": 8, "spend": 8, "other": [8, 11], "translat": 8, "plot_torch_export_tim": 8, "dfi": 8, "set_index": 8, "yerr": 8, "rot": 8, "30": 8, "027543": 8, "021778": 8, "038287": 8, "026010": 8, "005613": 8, "281844": 8, "187848": 8, "480475": 8, "106823": 8, "217368": 8, "210807": 8, "238999": 8, "010853": 8, "164643": 8, "140491": 8, "194862": 8, "144952": 8, "175237": 8, "020028": 8, "path": 8, "abspath": 8, "normpath": 8, "join": 8, "dirnam": 8, "__file__": 8, "upper": 8, "profile_funct": 8, "pr": 8, "dummyc": 8, "sortbi": 8, "stream": 8, "print_stat": 8, "getvalu": 8, "200": 8, "plot_torch_export_profile_": 8, "txt": [8, 13], "_h": 8, "custom0": 8, "custom2": 8, "0x7f587a451b40": 8, "2082027": 8, "2002017": 8, "primit": 8, "406": 8, "order": 8, "ncall": 8, "tottim": 8, "percal": 8, "cumtim": 8, "lineno": 8, "002": 8, "000": [8, 9, 12], "732": 8, "346": 8, "home": 8, "xadupr": 8, "github": [8, 13], "onnxrt": [8, 13], "dev": [8, 13], "242": 8, "721": 8, "344": 8, "local": [8, 13], "lib": 8, "python3": 8, "site": 8, "_intern": 8, "1341": 8, "001": 8, "811": 8, "162": 8, "1172": 8, "479": 8, "096": 8, "dynamo_graph_extractor": 8, "187": 8, "generate_fx": 8, "364": 8, "291": 8, "_dynamo": 8, "eval_fram": 8, "385": 8, "_fn": 8, "605": 8, "35": 8, "025": 8, "314": 8, "095": 8, "diagnost": 8, "infra": 8, "decor": 8, "71": 8, "wrapper": 8, "3735": 8, "1440": 8, "022": 8, "245": 8, "util": 8, "_stat": 8, "131": 8, "626": 8, "234": 8, "pre_export_pass": 8, "1449": 8, "common_pre_export_pass": 8, "071": 8, "102": 8, "_pass": 8, "240": 8, "616": 8, "174": 8, "external_util": 8, "23": 8, "inner": 8, "2880": 8, "1780": 8, "037": 8, "466": 8, "_subclass": 8, "fake_tensor": 8, "1473": 8, "__torch_dispatch__": 8, "008": 8, "451": 8, "123": 8, "105": 8, "214": 8, "410": 8, "1505": 8, "dispatch": 8, "490": 8, "007": 8, "372": 8, "005": 8, "183": 8, "run_nod": 8, "342": 8, "468": 8, "1156": 8, "190": 8, "438": 8, "166": 8, "wrap": 8, "219": 8, "experiment": 8, "proxy_tensor": 8, "942": 8, "178": 8, "218": 8, "_compil": 8, "171": 8, "217": 8, "498": 8, "dispatch_trac": 8, "2955": 8, "980": 8, "013": 8, "155": 8, "_op": 8, "568": 8, "__call__": 8, "078": 8, "208": 8, "_symbolic_trac": 8, "724": 8, "trace": 8, "043": 8, "204": 8, "521": 8, "996": 8, "_util": 8, "575": 8, "881": 8, "003": 8, "004": 8, "848": 8, "636": 8, "inner_torch_dispatch": 8, "027": 8, "818": 8, "010": 8, "279": 8, "proxy_cal": 8, "745": 8, "175": 8, "531": 8, "catch_error": 8, "744": 8, "349": 8, "convert_fram": 8, "274": 8, "_convert_frame_assert": 8, "743": 8, "433": 8, "741": 8, "348": 8, "time_wrapp": 8, "740": 8, "513": 8, "compile_inn": 8, "265": 8, "682": 8, "006": 8, "255": 8, "call_funct": 8, "337": 8, "267": 8, "bytecode_transform": 8, "1025": 8, "transform_code_object": 8, "332": 8, "266": 8, "decomp": 8, "32": 8, "_run": 8, "315": 8, "263": 8, "136": 8, "310": 8, "262": 8, "transform": 8, "259": 8, "252": 8, "symbolic_convert": 8, "2097": 8, "773": 8, "280": 8, "257": 8, "671": 8, "step": 8, "80": 8, "55": 8, "229": 8, "1507": 8, "_wrapped_call_impl": 8, "1513": 8, "_call_impl": 8, "1035": 8, "460": 8, "009": 8, "161": 8, "_prims_common": 8, "969": 8, "016": 8, "452": 8, "965": 8, "1186": 8, "964": 8, "624": 8, "950": 8, "101": 8, "45": 8, "918": 8, "020": 8, "115": 8, "017": 8, "917": 8, "_c": 8, "_nn": 8, "65": 8, "912": 8, "014": 8, "builder": 8, "1279": 8, "wrap_fx_proxi": 8, "1339": 8, "wrap_fx_proxy_cl": 8, "909": 8, "182": 8, "358": 8, "2775": 8, "026": 8, "888": 8, "_pytre": 8, "tree_map": 8, "75": 8, "011": 8, "_decomp": 8, "decomposit": 8, "851": 8, "170": 8, "decomposition_t": 8, "create_onnx_friendly_decomposition_t": 8, "157": 8, "031": 8, "844": 8, "169": 8, "_create_onnx_supports_op_overload_t": 8, "833": 8, "1532": 8, "get_fake_valu": 8, "827": 8, "165": 8, "90": 8, "808": 8, "1117": 8, "wrap_fake_except": 8, "15640": 8, "4110": 8, "132": 8, "736": 8, "599": 8, "unflatten": 8, "029": 8, "nn_modul": 8, "582": 8, "1311": 8, "addmm": 8, "360": 8, "019": 8, "570": 8, "detach": 8, "tensorbas": 8, "565": 8, "023": 8, "297": 8, "call_modul": 8, "563": 8, "814": 8, "module_call_wrapp": 8, "1489": 8, "012": 8, "562": 8, "561": 8, "458": 8, "816": 8, "4650": 8, "502": 8, "664": 8, "tree_flatten": 8, "15970": 8, "107": 8, "486": 8, "643": 8, "_tree_flatten_help": 8, "481": 8, "track_tensor_tre": 8, "250": 8, "480": 8, "188": 8, "wrap_with_proxi": 8, "444": 8, "089": 8, "1203": 8, "result_capturing_wrapp": 8, "525": 8, "325": 8, "435": 8, "1579": 8, "1649": 8, "416": 8, "083": 8, "type_promot": 8, "1712": 8, "414": 8, "149": 8, "set_meta": 8, "35730": 8, "059": 8, "402": 8, "is_registered_op": 8, "401": 8, "080": 8, "guard": 8, "934": 8, "399": 8, "120": 8, "extract_v": 8, "260": 8, "396": 8, "117": 8, "snapshot_fak": 8, "70": 8, "391": 8, "graph_modul": 8, "707": 8, "recompil": 8, "383": 8, "077": 8, "_functorch": 8, "functional_cal": 8, "stateless": 8, "_functional_cal": 8, "1630": 8, "378": 8, "076": 8, "call_wrap": 8, "299": 8, "780": 8, "405": 8, "373": 8, "copi": [8, 11], "_reconstruct": 8, "1595": 8, "369": 8, "deepcopi": 8, "368": 8, "015": 8, "1128": 8, "deepcopy_to_fake_tensor": 8, "367": 8, "1130": 8, "362": 8, "227": 8, "_deepcopy_dict": 8, "1200": 8, "353": 8, "1832": 8, "wrap_meta_outputs_with_default_device_log": 8, "350": 8, "1268": 8, "python_cod": 8, "35805": 8, "092": 8, "get_op_funct": 8, "273305": 8, "266425": 8, "builtin": 8, "isinst": 8, "330": 8, "066": 8, "1009": 8, "compile_check_fn": 8, "326": 8, "__deepcopy__": 8, "322": 8, "064": 8, "modular": 8, "821": 8, "321": 8, "1330": 8, "_python_cod": 8, "028": 8, "320": 8, "_gen_python_cod": 8, "8515": 8, "3235": 8, "309": 8, "657": 8, "listcomp": 8, "305": 8, "354": 8, "303": 8, "2040": 8, "__torch_function__": 8, "800": 8, "296": 8, "1690": 8, "__setattr__": 8, "365": 8, "293": 8, "proxi": 8, "create_proxi": 8, "1250": 8, "1839": 8, "462": 8, "9330": 8, "032": 8, "254": 8, "679": 8, "map_arg": 8, "230": 8, "1255": 8, "241": 8, "048": 8, "591": 8, "build_modul": 8, "655": 8, "237": 8, "899": 8, "tree_map_onli": 8, "236": 8, "203": 8, "235": 8, "047": 8, "fx_onnx_interpret": 8, "400": 8, "233": 8, "221": 8, "_ref": 8, "134": 8, "220": 8, "376": 8, "18360": 8, "9335": 8, "215": 8, "687": 8, "map_aggreg": 8, "_jit_intern": 8, "489": 8, "774": 8, "_max_pool2d": 8, "213": 8, "22800": 8, "21210": 8, "052": 8, "206": 8, "next": 8, "760": 8, "865": 8, "create_nod": 8, "198": 8, "040": 8, "1207": 8, "build_guard_funct": 8, "196": 8, "246": 8, "195": 8, "conv": 8, "459": 8, "_conv_forward": 8, "194": 8, "57100": 8, "094": 8, "185": 8, "34": 8, "__new__": 8, "021": 8, "176": 8, "from_meta_and_devic": 8, "aten": 8, "22415": 8, "046": 8, "473": 8, "_is_leaf": 8, "33195": 8, "_get_node_typ": 8, "225": 8, "increase_prec": 8, "21995": 8, "085": 8, "153": 8, "registr": 8, "58": 8, "from_qualified_nam": 8, "5470": 8, "ast": 8, "visit": 8, "85": 8, "152": 8, "610": 8, "eval_with_kei": 8, "284": 8, "144": 8, "927": 8, "rewrite_signatur": 8, "143": 8, "727": 8, "1570": 8, "create_arg": 8, "1240": 8, "138": 8, "467": 8, "7840": 8, "7110": 8, "133": 8, "130": 8, "__enter__": 8, "11440": 8, "11075": 8, "693": 8, "genexpr": 8, "494": 8, "__post_init__": 8, "125": 8, "clone": [8, 13], "275": 8, "395": 8, "2202": 8, "return_valu": 8, "129": 8, "output_graph": 8, "803": 8, "compile_subgraph": 8, "317": 8, "from_real_tensor": 8, "1275": 8, "515": 8, "emit_nod": 8, "135": 8, "127": 8, "1020": 8, "add_code_part": 8, "126": 8, "238": 8, "119": 8, "1921": 8, "from_tensor": 8, "73960": 8, "108": 8, "getattr": 8, "425": 8, "_prim": 8, "338": 8, "_prim_elementwise_meta": 8, "1425": 8, "1065": 8, "256": 8, "1635": 8, "114": 8, "676": 8, "tree_unflatten": 8, "111": 8, "meta_util": 8, "627": 8, "810": 8, "109": 8, "163": 8, "_traceback": 8, "summari": 8, "073": 8, "106": 8, "455": 8, "_is_namedtuple_inst": 8, "186": 8, "meta_tensor": 8, "104": 8, "1280": 8, "load_attr": 8, "030": 8, "139": 8, "__exit__": 8, "4775": 8, "create_nam": 8, "35825": 8, "056": 8, "099": 8, "44": 8, "from_name_part": 8, "le": 8, "098": 8, "mm": 8, "675": 8, "097": 8, "147": 8, "_ast_unpars": 8, "where": 8, "76": 8, "869": 8, "499": 8, "6445": 8, "2125": 8, "688": 8, "_tree_leaves_help": 8, "1028": 8, "compile_and_call_fx_graph": 8, "1679": 8, "unpars": 8, "_extract_symbolized_tb": 8, "594": 8, "decompos": 8, "090": 8, "83": 8, "replace_placeholder_name_and_target": 8, "1214": 8, "088": 8, "411": 8, "_maybe_broadcast": 8, "903": 8, "487": 8, "3240": 8, "087": 8, "801": 8, "travers": 8, "onnxfunction_dispatch": 8, "33000": 8, "055": 8, "086": 8, "573": 8, "__hash__": 8, "084": 8, "onnxscript": 8, "function_lib": 8, "torch_lib": 8, "graph_build": 8, "938": 8, "to_model_proto": 8, "0x7f587a451bd0": 8, "inferencesess": 8, "sessionopt": 8, "graphoptimizationlevel": 8, "data1": 8, "data_mem_load": 8, "data_mem_first_run": 8, "data_mem_run": 8, "conf": 8, "listdir": 8, "startswith": 8, "plot_torch": 8, "cpuexecutionprovid": 8, "aot": 8, "ext": 8, "splitext": 8, "provid": [8, 11], "n_node": 8, "n_function": 8, "n_sub": 8, "op_typ": 8, "obs1": 8, "short_ob": 8, "opt": 8, "add_session_config_entri": 8, "session": 8, "disable_aot_function_inlin": 8, "graph_optimization_level": 8, "ort_enable_al": 8, "optimized_model_filepath": 8, "lower": 8, "set_descript": 8, "sess": 8, "memob": 8, "get_input": 8, "feed": 8, "random": 8, "astyp": 8, "plot_torch_export_ort_tim": 8, "plot_torch_export_ort_time1_init": 8, "dfmem": 8, "plot_torch_export_ort_load_mem": 8, "dfmemr": 8, "plot_torch_export_ort_run_mem": 8, "dfmemfr": 8, "plot_torch_export_ort_first_run_mem": 8, "df_init": 8, "00012496184971144174": 8, "plot_torch_export_script": 8, "02": 8, "22": 8, "00017095383411518488": 8, "03": 8, "17": 8, "53": 8, "0006309019323795666": 8, "43": 8, "0028474076923605306": 8, "33": 8, "00012319041336730186": 8, "plot_torch_export_dynopt": 8, "42": 8, "49": 8, "00045159969419592157": 8, "96": 8, "002174474999975473": 8, "0034330290322794744": 8, "67": 8, "00026775577889093927": 8, "plot_torch_export_dynamo": 8, "04": 8, "41": 8, "0003683023569036431": 8, "19": 8, "0013916988095410315": 8, "92": 8, "003031642424310011": 8, "21": 8, "84": 8, "000125": 8, "000004": 8, "000073": 8, "000143": 8, "1038": 8, "129710": 8, "000504": 8, "000171": 8, "000053": 8, "000133": 8, "000246": 8, "639": 8, "109239": 8, "000692": 8, "000631": 8, "000146": 8, "000523": 8, "000983": 8, "207": 8, "130597": 8, "001020": 8, "002847": 8, "000779": 8, "002198": 8, "004010": 8, "111049": 8, "002817": 8, "000123": 8, "000008": 8, "000113": 8, "000248": 8, "1137": 8, "140067": 8, "000655": 8, "000452": 8, "000093": 8, "000315": 8, "000611": 8, "327": 8, "147673": 8, "000836": 8, "002174": 8, "001744": 8, "001099": 8, "005998": 8, "139166": 8, "003675": 8, "003433": 8, "001222": 8, "002236": 8, "007378": 8, "31": 8, "106424": 8, "004722": 8, "000268": 8, "000044": 8, "000114": 8, "000299": 8, "597": 8, "159850": 8, "000394": 8, "000368": 8, "000041": 8, "000256": 8, "000490": 8, "109386": 8, "000950": 8, "001392": 8, "000461": 8, "000768": 8, "003245": 8, "116903": 8, "002638": 8, "003032": 8, "001003": 8, "002306": 8, "004533": 8, "100044": 8, "003204": 8, "view": 8, "view_tim": 8, "suffix": 8, "pivot_t": 8, "plot_torch_export_ort_": 8, "_comput": 8, "piv_gpu": 8, "piv_cpu": 8, "barh": 8, "arrai": 8, "center": 8, "ylabel": 8, "new": 8, "without": [8, 11], "long": 8, "nhide": 8, "plot_torch_export_ort_time_2": 8, "time1_init": 8, "118549": 8, "058002": 8, "232628": 8, "049148": 8, "028253": 8, "038460": 8, "057695": 8, "038846": 8, "012322": 8, "026405": 8, "012308": 8, "016496": 8, "nrun": 8, "plot_torch_export_ort_load_mem_": 8, "plot_torch_export_ort_first_run_mem_": 8, "plot_torch_export_ort_run_mem_": 8, "705": 8, "auto_exampl": 9, "mem": [9, 12], "microsoft": [10, 11, 13], "tutori": 10, "api": 10, "licens": 10, "chang": 10, "mit": 11, "copyright": 11, "c": 11, "corpor": 11, "permiss": 11, "herebi": 11, "grant": 11, "free": 11, "charg": 11, "person": 11, "obtain": 11, "softwar": 11, "associ": 11, "document": 11, "deal": 11, "restrict": 11, "right": 11, "modifi": 11, "merg": 11, "distribut": 11, "sublicens": 11, "sell": 11, "permit": 11, "whom": 11, "furnish": 11, "so": 11, "subject": 11, "condit": 11, "abov": 11, "notic": 11, "shall": 11, "substanti": 11, "portion": 11, "THE": 11, "AS": 11, "warranti": 11, "OF": 11, "kind": 11, "express": 11, "OR": 11, "impli": 11, "BUT": 11, "NOT": 11, "TO": 11, "merchant": 11, "fit": 11, "FOR": 11, "particular": 11, "purpos": 11, "AND": 11, "noninfring": 11, "IN": 11, "NO": 11, "event": 11, "author": 11, "holder": 11, "BE": 11, "liabl": 11, "claim": 11, "damag": 11, "liabil": 11, "whether": 11, "action": 11, "contract": 11, "tort": 11, "aris": 11, "connect": 11, "WITH": 11, "pytorch": 13, "nightli": 13, "build": 13, "should": 13, "instal": 13, "instruct": 13, "mai": 13, "need": 13, "your": 13, "configurt": 13, "git": 13, "http": 13, "com": 13, "pip": 13, "pre": 13, "torchvis": 13, "torchaudio": 13, "url": 13, "org": 13, "whl": 13, "cu121": 13, "pynvml": 13, "requir": 13, "pythonpath": 13, "folder": 13}, "objects": {"onnxrt_backend_dev.args": [[5, 0, 1, "", "get_parsed_args"]], "onnxrt_backend_dev.bench_run": [[1, 1, 1, "", "BenchmarkError"], [1, 0, 1, "", "get_machine"], [1, 0, 1, "", "run_benchmark"]], "onnxrt_backend_dev.ext_test_case": [[5, 1, 1, "", "ExtTestCase"]], "onnxrt_backend_dev.ext_test_case.ExtTestCase": [[5, 2, 1, "", "assertAlmostEqual"], [5, 2, 1, "", "capture"], [5, 2, 1, "", "tearDownClass"], [5, 2, 1, "", "tryCall"]], "onnxrt_backend_dev.monitoring.benchmark": [[3, 0, 1, "", "measure_time"]], "onnxrt_backend_dev.monitoring.memory_peak": [[3, 1, 1, "", "MemorySpy"], [3, 1, 1, "", "Monitor"], [3, 0, 1, "", "start_spying_on"]], "onnxrt_backend_dev.monitoring.memory_peak.MemorySpy": [[3, 2, 1, "", "start"], [3, 2, 1, "", "stop"]], "onnxrt_backend_dev.monitoring.profiling": [[3, 1, 1, "", "ProfileNode"], [3, 0, 1, "", "profile"], [3, 0, 1, "", "profile2graph"]], "onnxrt_backend_dev.monitoring.profiling.ProfileNode": [[3, 2, 1, "", "add_called_by"], [3, 2, 1, "", "add_calls_to"], [3, 2, 1, "", "as_dict"], [3, 2, 1, "", "filter_node_"], [3, 2, 1, "", "get_root"], [3, 3, 1, "", "key"], [3, 2, 1, "", "to_json"], [3, 2, 1, "", "to_text"]], "onnxrt_backend_dev.plotting.memory": [[4, 0, 1, "", "memory_peak_plot"]]}, "objtypes": {"0": "py:function", "1": "py:class", "2": "py:method", "3": "py:property"}, "objnames": {"0": ["py", "function", "Python function"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "property", "Python property"]}, "titleterms": {"benchmark": [1, 8], "onnxrt_backend_dev": [1, 4], "bench_run": 1, "benchmarkerror": 1, "get_machin": 1, "run_benchmark": 1, "script": 1, "llama": [1, 7], "dort_bench": 1, "api": 2, "monitor": 3, "measur": [3, 7], "comput": [3, 9, 12], "time": [3, 8, 9, 12], "measure_tim": 3, "memori": [3, 4, 8], "start_spying_on": 3, "memoryspi": 3, "profil": [3, 8], "profilenod": 3, "profile2graph": 3, "plot": 4, "memory_peak_plot": 4, "test": 5, "unit": 5, "exttestcas": 5, "command": 5, "line": 5, "get_parsed_arg": 5, "exampl": 6, "galleri": 6, "speed": [7, 8], "evalu": 8, "differ": 8, "wai": 8, "export": 8, "torch": [8, 10], "model": 8, "onnx": [8, 10], "some": 8, "helper": 8, "The": 8, "ort": 8, "load": 8, "first": 8, "run": 8, "onnxrt": 10, "backend": 10, "dev": 10, "tool": 10, "help": 10, "develop": 10, "function": 10, "content": 10, "more": 10, "licens": 11, "tutori": 13, "chang": 0, "log": 0, "0": 0, "1": 0, "get": 13, "start": 13}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx.ext.todo": 2, "sphinx": 60}, "alltitles": {"benchmarks": [[1, "benchmarks"]], "onnxrt_backend_dev.bench_run": [[1, "onnxrt-backend-dev-bench-run"]], "BenchmarkError": [[1, "benchmarkerror"]], "get_machine": [[1, "get-machine"]], "run_benchmark": [[1, "run-benchmark"]], "scripts": [[1, "scripts"]], "onnxrt_backend_dev.llama.dort_bench": [[1, "onnxrt-backend-dev-llama-dort-bench"]], "API": [[2, "api"]], "monitoring": [[3, "monitoring"]], "Measuring Computing Time": [[3, "measuring-computing-time"]], "measure_time": [[3, "measure-time"]], "Monitoring Memory": [[3, "monitoring-memory"]], "start_spying_on": [[3, "start-spying-on"]], "MemorySpy": [[3, "memoryspy"]], "Monitor": [[3, "monitor"]], "Profiling": [[3, "profiling"]], "ProfileNode": [[3, "profilenode"]], "profile": [[3, "profile"]], "profile2graph": [[3, "profile2graph"]], "tests": [[5, "tests"]], "unit tests": [[5, "unit-tests"]], "ExtTestCase": [[5, "exttestcase"]], "command line": [[5, "command-line"]], "get_parsed_args": [[5, "get-parsed-args"]], "Example gallery": [[6, "example-gallery"]], "Measure LLAMA speed": [[7, "measure-llama-speed"]], "Evaluate different ways to export a torch model to ONNX": [[8, "evaluate-different-ways-to-export-a-torch-model-to-onnx"]], "Some helpers": [[8, "some-helpers"]], "The model": [[8, "the-model"]], "The exporters": [[8, "the-exporters"]], "Exporter memory": [[8, "exporter-memory"]], "Exporter speed": [[8, "exporter-speed"]], "Exporter Profiling": [[8, "exporter-profiling"]], "Benchmark exported models with ORT": [[8, "benchmark-exported-models-with-ort"]], "Memory Loading Time (ORT)": [[8, "memory-loading-time-ort"]], "Memory First Running Time (ORT)": [[8, "memory-first-running-time-ort"]], "Memory Running Time (ORT)": [[8, "memory-running-time-ort"]], "Computation times": [[9, "computation-times"], [12, "computation-times"]], "plotting": [[4, "plotting"]], "onnxrt_backend_dev.plotting.memory": [[4, "onnxrt-backend-dev-plotting-memory"]], "memory_peak_plot": [[4, "memory-peak-plot"]], "onnxrt-backend-dev: tools to help developping onnx functionalities in torch": [[10, "onnxrt-backend-dev-tools-to-help-developping-onnx-functionalities-in-torch"]], "Contents": [[10, null]], "More": [[10, null]], "Change Logs": [[0, "change-logs"]], "0.1.0": [[0, "id1"]], "License": [[11, "license"]], "Tutorial": [[13, "tutorial"]], "Getting Started": [[13, "getting-started"]]}, "indexentries": {"benchmarkerror (class in onnxrt_backend_dev.bench_run)": [[1, "onnxrt_backend_dev.bench_run.BenchmarkError"]], "get_machine() (in module onnxrt_backend_dev.bench_run)": [[1, "onnxrt_backend_dev.bench_run.get_machine"]], "run_benchmark() (in module onnxrt_backend_dev.bench_run)": [[1, "onnxrt_backend_dev.bench_run.run_benchmark"]], "memoryspy (class in onnxrt_backend_dev.monitoring.memory_peak)": [[3, "onnxrt_backend_dev.monitoring.memory_peak.MemorySpy"]], "monitor (class in onnxrt_backend_dev.monitoring.memory_peak)": [[3, "onnxrt_backend_dev.monitoring.memory_peak.Monitor"]], "profilenode (class in onnxrt_backend_dev.monitoring.profiling)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode"]], "add_called_by() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.add_called_by"]], "add_calls_to() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.add_calls_to"]], "as_dict() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.as_dict"]], "filter_node_() (onnxrt_backend_dev.monitoring.profiling.profilenode static method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.filter_node_"]], "get_root() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.get_root"]], "key (onnxrt_backend_dev.monitoring.profiling.profilenode property)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.key"]], "measure_time() (in module onnxrt_backend_dev.monitoring.benchmark)": [[3, "onnxrt_backend_dev.monitoring.benchmark.measure_time"]], "profile() (in module onnxrt_backend_dev.monitoring.profiling)": [[3, "onnxrt_backend_dev.monitoring.profiling.profile"]], "profile2graph() (in module onnxrt_backend_dev.monitoring.profiling)": [[3, "onnxrt_backend_dev.monitoring.profiling.profile2graph"]], "start() (onnxrt_backend_dev.monitoring.memory_peak.memoryspy method)": [[3, "onnxrt_backend_dev.monitoring.memory_peak.MemorySpy.start"]], "start_spying_on() (in module onnxrt_backend_dev.monitoring.memory_peak)": [[3, "onnxrt_backend_dev.monitoring.memory_peak.start_spying_on"]], "stop() (onnxrt_backend_dev.monitoring.memory_peak.memoryspy method)": [[3, "onnxrt_backend_dev.monitoring.memory_peak.MemorySpy.stop"]], "to_json() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.to_json"]], "to_text() (onnxrt_backend_dev.monitoring.profiling.profilenode method)": [[3, "onnxrt_backend_dev.monitoring.profiling.ProfileNode.to_text"]], "memory_peak_plot() (in module onnxrt_backend_dev.plotting.memory)": [[4, "onnxrt_backend_dev.plotting.memory.memory_peak_plot"]], "exttestcase (class in onnxrt_backend_dev.ext_test_case)": [[5, "onnxrt_backend_dev.ext_test_case.ExtTestCase"]], "assertalmostequal() (onnxrt_backend_dev.ext_test_case.exttestcase method)": [[5, "onnxrt_backend_dev.ext_test_case.ExtTestCase.assertAlmostEqual"]], "capture() (onnxrt_backend_dev.ext_test_case.exttestcase method)": [[5, "onnxrt_backend_dev.ext_test_case.ExtTestCase.capture"]], "get_parsed_args() (in module onnxrt_backend_dev.args)": [[5, "onnxrt_backend_dev.args.get_parsed_args"]], "teardownclass() (onnxrt_backend_dev.ext_test_case.exttestcase class method)": [[5, "onnxrt_backend_dev.ext_test_case.ExtTestCase.tearDownClass"]], "trycall() (onnxrt_backend_dev.ext_test_case.exttestcase method)": [[5, "onnxrt_backend_dev.ext_test_case.ExtTestCase.tryCall"]]}})